@using Common.Components.Templates
@using Common.Enumerations
@using Common.Models
@using Common.Models.Operations

@if (Model.Uri.IsExternal) Model.Activator.EndIcon = IconPath.OpenInNew;

<CoreOp Model=Model.Uri Class=@Model.Activator.Class>
    @if (ChildContent is not null)
    {
        @ChildContent
    }
    else
    {
        if (Model.Uri.Image is ImageModel image)
        {
            <Activator Model=Model.Activator>
                <ImageTemplate Class="inline" Model=image />
            </Activator>
        }
        else
        {
            if (Model.Uri.Description is string description && !string.IsNullOrWhiteSpace(description))
            {
                <span>@description</span>
            }
            <Activator Model=Model.Activator>
                @Model.Uri.Content
            </Activator>
        }
    }
</CoreOp>

@code {
    [Parameter, EditorRequired]
    public OperationModel Model { get; set; }

    [Parameter]
    public RenderFragment? ChildContent { get; set; }
}
